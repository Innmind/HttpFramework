arguments:
    routes: set<Innmind\Url\PathInterface>
    controllers: map<string, Innmind\HttpFramework\Controller>
    requestMatcher: Innmind\Router\RequestMatcher ?? $defaultRequestMatcher

dependencies:
    router @innmind/router/container.yml:
        routes: $routes

expose:
    router: $handler.router
    enforceHttps: $handler.enforceHttps

services:
    handler:
        router Innmind\HttpFramework\Router:
            - $requestMatcher
            - $controllers

        enforceHttps Innmind\HttpFramework\EnforceHttps:
            - '@decorated'

    defaultRequestMatcher Innmind\HttpFramework\Router\RequestMatcher:
        - $router.requestMatcher
